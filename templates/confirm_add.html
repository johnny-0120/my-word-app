{% extends 'base.html' %}

{% block title %}確認新增{% endblock %}

{% block content %}
    <h1 align="center">請確認單字資訊</h1>
    
    <article>
        <header>
            <strong>{{ word }}</strong>
        </header>
        <form action="{{ url_for('save') }}" method="post" id="save-form">
            <input type="hidden" name="word" value="{{ word }}">
            <input type="hidden" name="definition" value="{{ definition }}">
            <input type="hidden" name="example_sentence" value="{{ example_sentence }}">
            <input type="hidden" name="etymology_json" value="{{ etymology | tojson | safe }}">
            <input type="hidden" name="synonyms_json" value="{{ synonyms | tojson | safe }}">
            <input type="hidden" name="antonyms_json" value="{{ antonyms | tojson | safe }}">
            
            <p><strong>定義：</strong><br>{{ definition }}</p>
            <p><strong>例句：</strong><br>{{ example_sentence }}</p>

            {% if etymology and (etymology.prefixes or etymology.roots or etymology.suffixes) %}
            <p><strong>字根分析：</strong><br>
                {% for p in etymology.prefixes %}
                    <kbd>字首: {{ p.prefix }} ({{ p.meaning }})</kbd>
                {% endfor %}
                {% for r in etymology.roots %}
                    <kbd>字根: {{ r.root }} ({{ r.meaning }})</kbd>
                {% endfor %}
                {% for s in etymology.suffixes %}
                    <kbd>字尾: {{ s.suffix }} ({{ s.meaning }})</kbd>
                {% endfor %}
            </p>
            {% endif %}

            {% if synonyms %}
                <p><strong>同義詞：</strong><br>
                {% for s in synonyms %}
                    <kbd>{{ s }}</kbd>
                {% endfor %}
                </p>
            {% endif %}
            {% if antonyms %}
                <p><strong>反義詞：</strong><br>
                {% for a in antonyms %}
                    <kbd>{{ a }}</kbd>
                {% endfor %}
                </p>
            {% endif %}
            </form>
        <footer>
            <button type="submit" form="save-form">儲存並建立關聯</button>
        </footer>
    </article>

    {% if related_words %}
    <hr>
    <h2>相關單字探索 🧭</h2>
    <div class="word-grid">
        {% for rel_word in related_words %}
        <article>
            <header><strong>{{ rel_word.word }}</strong></header>
            <p>{{ rel_word.hint }}</p>
            <footer>
                <form action="{{ url_for('lookup') }}" method="post">
                    <input type="hidden" name="word" value="{{ rel_word.word }}">
                    <button type="submit" class="contrast outline">查詢這個單字</button>
                </form>
            </footer>
        </article>
        {% endfor %}
    </div>
    {% endif %}

{% endblock %}